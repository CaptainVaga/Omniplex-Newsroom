<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WE333 UK Parliament Monitor | bba.news</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #fff;
            min-height: 100vh;
        }

        .header {
            background: rgba(0,0,0,0.3);
            padding: 20px;
            text-align: center;
            border-bottom: 2px solid #e94560;
        }

        .header h1 {
            font-size: 2.5em;
            color: #e94560;
            margin-bottom: 10px;
        }

        .header .subtitle {
            color: #a0a0a0;
            font-size: 1.1em;
        }

        .heritage {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 15px;
            font-size: 0.9em;
            color: #888;
        }

        .heritage span {
            padding: 5px 15px;
            background: rgba(233, 69, 96, 0.2);
            border-radius: 20px;
        }

        .status-bar {
            background: #0f3460;
            padding: 15px;
            display: flex;
            justify-content: center;
            gap: 40px;
            flex-wrap: wrap;
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .status-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #4ecca3;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .main-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 30px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        @media (max-width: 900px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        .card {
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .card h2 {
            color: #e94560;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.3em;
        }

        .card h2 .icon {
            font-size: 1.5em;
        }

        .bill-item, .vote-item {
            background: rgba(0,0,0,0.2);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 12px;
            border-left: 4px solid #4ecca3;
        }

        .bill-item h3, .vote-item h3 {
            font-size: 1em;
            margin-bottom: 8px;
            color: #fff;
        }

        .bill-meta, .vote-meta {
            font-size: 0.85em;
            color: #888;
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .vote-result {
            display: flex;
            gap: 20px;
            margin-top: 10px;
        }

        .vote-ayes {
            color: #4ecca3;
            font-weight: bold;
        }

        .vote-noes {
            color: #e94560;
            font-weight: bold;
        }

        .ai-analysis {
            grid-column: 1 / -1;
        }

        .ai-analysis .analysis-text {
            background: rgba(78, 204, 163, 0.1);
            padding: 20px;
            border-radius: 10px;
            line-height: 1.8;
            border-left: 4px solid #4ecca3;
        }

        .stats-row {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            grid-column: 1 / -1;
        }

        @media (max-width: 700px) {
            .stats-row {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .stat-card {
            background: rgba(233, 69, 96, 0.1);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid rgba(233, 69, 96, 0.3);
        }

        .stat-card .number {
            font-size: 2.5em;
            font-weight: bold;
            color: #e94560;
        }

        .stat-card .label {
            color: #888;
            margin-top: 5px;
        }

        .footer {
            text-align: center;
            padding: 30px;
            color: #666;
            border-top: 1px solid rgba(255,255,255,0.1);
            margin-top: 30px;
        }

        .footer .we333 {
            color: #e94560;
            font-weight: bold;
        }

        .sha-badge {
            background: rgba(78, 204, 163, 0.2);
            padding: 5px 15px;
            border-radius: 20px;
            font-family: monospace;
            font-size: 0.8em;
            color: #4ecca3;
        }

        .loading {
            text-align: center;
            padding: 50px;
            color: #888;
        }

        .last-update {
            text-align: center;
            color: #666;
            padding: 10px;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <header class="header">
        <h1>WE333 UK Parliament Monitor</h1>
        <p class="subtitle">Real-time democracy monitoring with zero manipulation</p>
        <div class="heritage">
            <span>1951 THA</span>
            <span>1970s BBA</span>
            <span>2025 AIIA</span>
        </div>
    </header>

    <div class="status-bar">
        <div class="status-item">
            <div class="status-dot"></div>
            <span>Parliament API: Live</span>
        </div>
        <div class="status-item">
            <div class="status-dot"></div>
            <span>Gemini AI: Active</span>
        </div>
        <div class="status-item">
            <div class="status-dot"></div>
            <span>SHA256: Verified</span>
        </div>
        <div class="status-item">
            <div class="status-dot"></div>
            <span>Ethics: Enforced</span>
        </div>
    </div>

    <div class="last-update">
        Last updated: <span id="lastUpdate">Loading...</span>
    </div>

    <main class="main-content">
        <div class="stats-row">
            <div class="stat-card">
                <div class="number" id="billCount">-</div>
                <div class="label">Active Bills</div>
            </div>
            <div class="stat-card">
                <div class="number" id="voteCount">-</div>
                <div class="label">Recent Votes</div>
            </div>
            <div class="stat-card">
                <div class="number">650</div>
                <div class="label">MPs Monitored</div>
            </div>
            <div class="stat-card">
                <div class="number">8</div>
                <div class="label">Active Agents</div>
            </div>
        </div>

        <div class="card ai-analysis">
            <h2><span class="icon">ü§ñ</span> AI Analysis (Gemini)</h2>
            <div class="analysis-text" id="aiAnalysis">
                Loading AI analysis...
            </div>
        </div>

        <div class="card">
            <h2><span class="icon">üìú</span> Current Bills</h2>
            <div id="billsList">
                <div class="loading">Loading bills...</div>
            </div>
        </div>

        <div class="card">
            <h2><span class="icon">üó≥Ô∏è</span> Recent Votes</h2>
            <div id="votesList">
                <div class="loading">Loading votes...</div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <p><span class="we333">WE333 OMNIPLEX</span> | Human + AI Collaborative Truth Infrastructure</p>
        <p style="margin-top: 10px;">Three generations. One truth. Zero manipulation.</p>
        <p style="margin-top: 15px;">
            <span class="sha-badge" id="shaHash">SHA: Loading...</span>
        </p>
        <p style="margin-top: 15px; font-size: 0.8em;">
            <a href="https://omniplex.earth" style="color: #e94560;">omniplex.earth</a> |
            <a href="https://aiia.earth" style="color: #e94560;">aiia.earth</a> |
            <a href="https://bba.news" style="color: #e94560;">bba.news</a>
        </p>
    </footer>

    <script>
        // Load data from JSON file
        async function loadData() {
            try {
                const response = await fetch('data.json');
                const data = await response.json();
                renderData(data);
            } catch (error) {
                console.error('Error loading data:', error);
                // Use embedded data as fallback
                renderData(embeddedData);
            }
        }

        // Embedded fallback data
        const embeddedData = {
            "timestamp": "2025-11-22T20:00:00",
            "bills": [
                {"shortTitle": "A34 Slip Road Safety (East Ilsley and Beedon) Bill", "currentStage": {"description": "2nd reading"}, "currentHouse": "Commons"},
                {"shortTitle": "Abolition of Business Rates Bill", "currentStage": {"description": "2nd reading"}, "currentHouse": "Commons"},
                {"shortTitle": "Abortion Bill", "currentStage": {"description": "2nd reading"}, "currentHouse": "Commons"},
                {"shortTitle": "Abortion Bill [HL]", "currentStage": {"description": "2nd reading"}, "currentHouse": "Lords"},
                {"shortTitle": "Abortion (Cleft Lip, Cleft Palate and Clubfoot) Bill", "currentStage": {"description": "2nd reading"}, "currentHouse": "Commons"}
            ],
            "divisions": [
                {"Title": "Border Security, Asylum and Immigration Bill: motion to disagree", "AyeCount": 326, "NoCount": 92, "Date": "2025-11-19"},
                {"Title": "Draft Radio Equipment (Amendment) (Northern Ireland) Regulations", "AyeCount": 376, "NoCount": 16, "Date": "2025-11-19"},
                {"Title": "Northern Ireland Troubles Bill: Second Reading", "AyeCount": 320, "NoCount": 105, "Date": "2025-11-18"},
                {"Title": "Northern Ireland Troubles Bill: Opposition Reasoned Amendment", "AyeCount": 165, "NoCount": 327, "Date": "2025-11-18"},
                {"Title": "Biodiversity Beyond National Jurisdiction Bill: Committee Amendment", "AyeCount": 147, "NoCount": 318, "Date": "2025-11-17"}
            ],
            "analysis": "UK Parliament is currently considering legislation related to road safety, business rates, and several bills addressing abortion. Recent votes reveal significant support for border security measures. The Northern Ireland Troubles Bill faced strong opposition. Human review recommended for publication.",
            "sha_hash": "e004dfa68fac88a484517c5375472a7f"
        };

        function renderData(data) {
            // Update timestamp
            document.getElementById('lastUpdate').textContent = new Date(data.timestamp).toLocaleString();

            // Update stats
            document.getElementById('billCount').textContent = data.bills.length;
            document.getElementById('voteCount').textContent = data.divisions.length;

            // Update AI analysis
            document.getElementById('aiAnalysis').textContent = data.analysis;

            // Update SHA
            document.getElementById('shaHash').textContent = `SHA: ${data.sha_hash}...`;

            // Render bills
            const billsHtml = data.bills.map(bill => `
                <div class="bill-item">
                    <h3>${bill.shortTitle}</h3>
                    <div class="bill-meta">
                        <span>Stage: ${bill.currentStage?.description || 'Unknown'}</span>
                        <span>House: ${bill.currentHouse}</span>
                    </div>
                </div>
            `).join('');
            document.getElementById('billsList').innerHTML = billsHtml;

            // Render votes
            const votesHtml = data.divisions.map(vote => `
                <div class="vote-item">
                    <h3>${vote.Title}</h3>
                    <div class="vote-result">
                        <span class="vote-ayes">Ayes: ${vote.AyeCount}</span>
                        <span class="vote-noes">Noes: ${vote.NoCount}</span>
                    </div>
                    <div class="vote-meta">
                        <span>Date: ${vote.Date}</span>
                    </div>
                </div>
            `).join('');
            document.getElementById('votesList').innerHTML = votesHtml;
        }

        // Load data on page load
        loadData();

        // Auto-refresh every 5 minutes
        setInterval(loadData, 300000);
    </script>
</body>
</html>
